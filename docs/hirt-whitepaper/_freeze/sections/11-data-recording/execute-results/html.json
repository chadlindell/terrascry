{
  "hash": "cd3c08711ca5e35b4ff14dd22ebaca47",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Data Recording\"\nsubtitle: \"Data Formats, File Organization, and Logging Procedures\"\n---\n\n## Overview {#sec-recording-overview}\n\nThis section specifies the data formats and organization for HIRT field measurements. Consistent data recording ensures reliable post-processing and long-term data management. The HIRT system generates two primary data types: Magnetic Induction Tomography (MIT) measurements and Electrical Resistivity Tomography (ERT) measurements, each requiring specific record formats to capture all relevant parameters.\n\nAll data files use CSV (Comma-Separated Values) format for maximum compatibility with analysis software. Field logs supplement electronic records with contextual information that may affect data interpretation. The combination of structured electronic records and detailed field notes enables comprehensive quality assessment during post-processing.\n\n::: {#cell-fig-file-structure .cell execution_count=2}\n\n::: {.cell-output .cell-output-display}\n![HIRT data file organization showing directory structure, file naming conventions, and record field definitions for MIT and ERT data types. Each survey date creates a separate subdirectory containing section-specific measurement files.](11-data-recording_files/figure-html/fig-file-structure-output-1.png){#fig-file-structure}\n:::\n:::\n\n\n## MIT Record Format {#sec-mit-format}\n\nEach MIT measurement records the electromagnetic coupling between a transmitter-receiver probe pair. The record captures both the measurement geometry (which probes, which zone) and the signal parameters (amplitude, phase, frequency) needed for tomographic reconstruction.\n\n| Field | Description | Units/Format |\n|-------|-------------|--------------|\n| timestamp | Measurement time | ISO 8601 or Unix |\n| section_id | Survey section identifier | String (e.g., \"S01\") |\n| zone_id | Zone Hub identifier | String (e.g., \"ZA\") |\n| tx_probe_id | Transmitting probe ID | String (e.g., \"P01\") |\n| rx_probe_id | Receiving probe ID | String (e.g., \"P02\") |\n| freq_hz | Measurement frequency | Hz |\n| amp | Signal amplitude | V or normalized |\n| phase_deg | Phase angle | Degrees |\n| tx_current_mA | TX coil current | mA |\n\n: MIT record format fields {#tbl-mit-format}\n\n## ERT Record Format {#sec-ert-format}\n\nERT measurements record the voltage response to injected current, capturing the four-electrode geometry (two injection electrodes, one sense electrode) and the resulting potential. Polarity reversal measurements are recorded separately to enable electrode polarization correction during processing.\n\n| Field | Description | Units/Format |\n|-------|-------------|--------------|\n| timestamp | Measurement time | ISO 8601 |\n| section_id | Survey section identifier | String |\n| zone_id | Zone Hub identifier | String |\n| inject_pos_id | Positive current probe ID | String |\n| inject_neg_id | Negative current probe ID | String |\n| sense_id | Voltage sensing probe ID | String |\n| volt_mV | Measured voltage | mV |\n| current_mA | Injected current | mA |\n| polarity | Current direction | +1 or -1 |\n| notes | Additional notes | Free text |\n\n: ERT record format fields {#tbl-ert-format}\n\n### Example ERT Record\n\n```csv\ntimestamp,section_id,inject_pos_probe_id,inject_neg_probe_id,sense_probe_id,volt_mV,current_mA,polarity,notes\n2024-03-15T10:45:12Z,S01,P01,P20,P05,12.5,1.2,+1,\n2024-03-15T10:45:13Z,S01,P01,P20,P06,8.3,1.2,+1,\n2024-03-15T10:45:14Z,S01,P01,P20,P05,-12.4,1.2,-1,reversed polarity\n```\n\n## Probe Registry {#sec-probe-registry}\n\nEach probe in the HIRT system has a registry entry documenting its physical characteristics and calibration status. The probe registry is a shared file that applies across all surveys and enables consistent data interpretation even when probes are swapped between deployments.\n\n| Field | Description | Units/Format |\n|-------|-------------|--------------|\n| probe_id | Unique probe identifier | String |\n| coil_L_mH | TX coil inductance | mH |\n| coil_Q | Coil Q factor | Dimensionless |\n| rx_gain_dB | RX amplifier gain | dB |\n| ring_depths_m | ERT ring depths | m (comma-separated) |\n| firmware_rev | Firmware version | String |\n| calibration_date | Last calibration date | YYYY-MM-DD |\n| notes | Additional notes | Free text |\n\n: Probe registry fields {#tbl-probe-registry}\n\n### Example Probe Registry\n\n```csv\nprobe_id,coil_L_mH,coil_Q,rx_gain_dB,ring_depths_m,firmware_rev,calibration_date,notes\nP01,1.2,25,40,0.5,1.5,v1.2,2024-03-10,\nP02,1.15,28,40,0.5,1.5,v1.2,2024-03-10,\nP03,1.18,26,40,0.5,1.5,v1.2,2024-03-10,\n```\n\n## Recording Workflow {#sec-recording-workflow}\n\nThe HIRT data recording workflow follows a systematic process from site preparation through data backup. Each measurement loop captures MIT and ERT data for all probe pairs in a section before moving to the next section. Quality checks at multiple stages ensure data integrity before final storage.\n\n::: {#cell-fig-recording-workflow .cell execution_count=3}\n\n::: {.cell-output .cell-output-display}\n![Data recording workflow from field setup through storage. The measurement loop iterates through all probe pairs within each section, recording both MIT and ERT data before advancing. Quality checks and field notes are captured before final backup to multiple storage locations.](11-data-recording_files/figure-html/fig-recording-workflow-output-1.png){#fig-recording-workflow}\n:::\n:::\n\n\n## Data Storage {#sec-data-storage}\n\n### File Organization\n\n- **One CSV file per section** for MIT data\n- **One CSV file per section** for ERT data\n- **One registry file** for all probes (shared across surveys)\n- **Paper log** for conditions and notes (backup)\n\n### Naming Convention\n\n- MIT: `MIT_S{section_id}_{date}.csv`\n- ERT: `ERT_S{section_id}_{date}.csv`\n- Registry: `probe_registry.csv`\n- Field Log: `field_log_{date}.txt`\n\n## Metadata Requirements {#sec-metadata}\n\n### Site Information\n\n- Site name and GPS coordinates\n- Survey date and time (start/end)\n- Team members present\n- Weather conditions (temperature, precipitation, wind)\n- Soil type and estimated moisture content\n- Site access notes and restrictions\n\n### Measurement Parameters\n\n- Frequency list for MIT measurements\n- Current levels for ERT measurements\n- Probe spacing configuration\n- Insertion depths achieved\n- Grid coordinates and orientation\n\n## Data Quality Notes {#sec-quality-notes}\n\nField conditions that may affect data quality should be recorded in the paper log or the notes field of individual records. These annotations are critical for proper interpretation during post-processing and help identify measurements that may require special handling or exclusion from analysis.\n\n::: {.callout-note}\n## Record in Paper Log or Notes Field\n\n- Soil moisture changes during survey\n- Temperature variations (especially for long surveys)\n- External disturbances (vehicles, people, machinery)\n- Equipment issues or malfunctions\n- Anomalous readings with contextual explanation\n- Probe insertion difficulties or obstructions\n:::\n\n## Best Practices {#sec-best-practices}\n\n1. **Verify file integrity** after each section by checking record counts match expected probe pair combinations.\n2. **Backup data** to at least two locations before leaving the field site.\n3. **Timestamp all entries** using ISO 8601 format for unambiguous date/time parsing.\n4. **Document probe positions** with photographs showing grid layout and reference markers.\n5. **Record baseline readings** before and after each survey session to detect drift.\n6. **Note environmental changes** including passing weather fronts, irrigation events, or traffic patterns.\n\n::: {.callout-warning}\n## Data Integrity Warning\n\n- Never modify raw data files after collection\n- Create processed copies for any transformations\n- Maintain chain of custody documentation for forensic applications\n- Store original files in read-only archive locations\n:::\n\n## Software Compatibility Roadmap {#sec-software-compatibility}\n\nThe CSV data formats described above are designed as raw intermediate storage. Future software tools will provide import scripts to convert these raw logs into standard formats for open-source inversion frameworks:\n\n- **EIDORS (Matlab/Octave):** Import script will generate .mat structures for MIT-3D finite element reconstruction.\n- **pyGIMLi (Python):** Converters will map ERT data to the Unified Data Format for coupled inversion.\n- **ResIPy:** Direct import support for ERT .csv files is planned.\n\n",
    "supporting": [
      "11-data-recording_files/figure-html"
    ],
    "filters": [],
    "includes": {}
  }
}