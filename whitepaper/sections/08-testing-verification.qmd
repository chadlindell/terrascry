---
title: "Testing and Verification"
---

## Overview {#sec-testing-overview}

This section provides comprehensive testing procedures and quality control checklists for HIRT probes before field deployment. All probes must pass these tests to ensure reliable field operation. The testing framework covers mechanical integrity, electrical functionality, subsystem performance, and system integration.

::: {.callout-note}
## Testing Philosophy

- All tests must PASS for field deployment approval
- CONDITIONAL status requires documented workarounds and supervisor approval
- FAIL status requires repair, component replacement, and complete re-test
- Quantitative measurements recorded for traceability and trend analysis
:::

## Testing Workflow {#sec-testing-workflow}

The HIRT testing workflow follows a systematic progression from basic mechanical verification through complete system integration testing. Each stage must be completed successfully before proceeding to the next, ensuring that fundamental issues are identified and resolved before more complex testing begins.

### Test Sequence {#sec-test-sequence}

1. **Mechanical Testing** - Verify physical integrity of rod, probe head, ERT rings, and cables
2. **Electrical Testing** - Verify power supply, continuity, and communication interfaces
3. **MIT Subsystem Testing** - Verify coils, DDS, TX driver, RX chain, and coupling response
4. **ERT Subsystem Testing** - Verify ring isolation, contact resistance, and measurement chain
5. **System Integration Testing** - Verify complete system operation and data collection
6. **Environmental Testing** - Verify temperature stability and waterproofing (as applicable)
7. **QC Sign-off** - Final documentation review and deployment approval

```{python}
#| label: fig-verification-workflow
#| fig-cap: "Complete testing and verification workflow showing test categories, individual tests within each category, and the sequential progression from mechanical testing through QC sign-off. Each decision point requires all tests within the category to pass before proceeding."
#| fig-width: 11
#| fig-height: 8

import sys; sys.path.insert(0, '..') if '..' not in sys.path else None
from diagrams.testing import create_verification_workflow
import matplotlib.pyplot as plt
from PIL import Image

buf = create_verification_workflow()
img = Image.open(buf)
plt.figure(figsize=(11, 8))
plt.imshow(img)
plt.axis('off')
plt.tight_layout()
plt.show()
```

## Pre-Testing Setup {#sec-pre-testing}

### Test Equipment Required {#sec-test-equipment}

| Equipment | Purpose | Minimum Specification |
|-----------|---------|----------------------|
| Power Supply | Probe power delivery | 5V or 12V, current-limited to 2A |
| Digital Multimeter | Resistance, voltage, current | 0.1% accuracy, 4.5 digit |
| LCR Meter | Coil inductance and Q factor | 10 kHz test frequency, 0.1% accuracy |
| Oscilloscope | Signal verification | 50 MHz bandwidth, 2-channel minimum |
| Function Generator | Signal injection testing | 1 Hz - 100 kHz, sine/square |
| Base Hub | System-level testing | Complete calibrated unit |

: Test equipment requirements for HIRT probe verification {#tbl-test-equipment}

```{python}
#| label: fig-test-setup
#| fig-cap: "Test bench setup diagram showing the probe under test (center) connected to various test instruments. Power supply provides regulated DC power, DMM measures ERT parameters, LCR meter characterizes coils, oscilloscope monitors signals, function generator injects test waveforms, and base hub enables full system testing."
#| fig-width: 11
#| fig-height: 7

import sys; sys.path.insert(0, '..') if '..' not in sys.path else None
from diagrams.testing import create_test_setup_diagram

buf = create_test_setup_diagram()
img = Image.open(buf)
plt.figure(figsize=(11, 7))
plt.imshow(img)
plt.axis('off')
plt.tight_layout()
plt.show()
```

### Test Environment Requirements {#sec-test-environment}

- Clean, well-lit workbench with adequate space for equipment and probe
- Temperature: 20-25 degrees C (controlled room temperature)
- Minimize EMI sources: move phones, radios, and switching power supplies away
- Follow electrical safety procedures: use current-limited supplies, proper grounding
- Prepare test log template, probe registry entry, and calibration sheet before starting

## Mechanical Tests {#sec-mechanical-tests}

### Test M1: Rod Integrity {#sec-test-m1}

**Purpose:** Verify the probe rod is straight, undamaged, and properly assembled.

**Procedure:**

1. Inspect rod visually for cracks, bends, scratches, or other damage
2. Measure rod length using tape measure (should match specification +/-5 mm)
3. Roll rod on flat surface to check straightness - observe for wobble
4. Verify thread engagement on all joints (multi-section probes)
5. Perform gentle pull test on joints - no movement should occur

**Pass Criteria:** No visible damage, length within specification, rod straight, threads engaged properly, joints secure with no movement.

### Test M2: Probe Head Integrity {#sec-test-m2}

**Purpose:** Verify the probe head (junction box) is properly sealed and assembled.

1. Inspect capsule for cracks, damage, or discoloration
2. Verify cap seal is properly seated with no gaps
3. Check cable gland seal - should be tight with no cable movement
4. Test attachment to rod - should be secure with no rotation
5. Shake gently to check for loose internal components

### Test M3: ERT Ring Mounting {#sec-test-m3}

**Purpose:** Verify ERT electrode rings are properly mounted and positioned.

| Ring | Position from Tip | Tolerance |
|------|-------------------|-----------|
| Ring 1 | 0.5 m | +/- 2 cm |
| Ring 2 | 1.5 m | +/- 2 cm |
| Ring 3 | 2.5 m | +/- 2 cm |

: ERT ring position specifications {#tbl-ert-positions}

### Test M4: Cable Integrity {#sec-test-m4}

Visual inspection of cable for damage, kinks, or abrasion. Test continuity of all conductors end-to-end. Verify cable routing has no sharp bends that could damage insulation. Check strain relief at both ends. Gentle pull test to verify secure termination.

## Electrical Tests {#sec-electrical-tests}

### Test E1: Power Supply Verification {#sec-test-e1}

**Purpose:** Verify power input and regulation circuits function correctly.

| Parameter | Target | Tolerance | Status |
|-----------|--------|-----------|--------|
| 3.3V Rail | 3.3V | +/- 0.1V | [ ] Pass [ ] Fail |
| 5V Rail | 5.0V | +/- 0.1V | [ ] Pass [ ] Fail |
| Current Draw | < spec | See datasheet | [ ] Pass [ ] Fail |
| Voltage Stability | Stable | No fluctuations | [ ] Pass [ ] Fail |
| Temperature | < 50C | No excessive heat | [ ] Pass [ ] Fail |

: Power supply test criteria {#tbl-power-test}

### Test E2: Continuity and Shorts {#sec-test-e2}

With power off, measure resistance between power and ground (should be >100 ohm). Check for shorts between all signal lines. Verify all connections are continuous end-to-end. Confirm shield connections are proper.

### Test E3: Communication Interface {#sec-test-e3}

Connect probe to base hub. Send test command and verify response. Test data transfer with multiple packets. Check reliability over 100 transactions (must be >95% success rate).

## MIT Subsystem Tests {#sec-mit-tests}

### Test MIT1: Coil Parameters {#sec-test-mit1}

| Parameter | TX Coil | RX Coil | Pass Criteria |
|-----------|---------|---------|---------------|
| Inductance | Measured: ___ | Measured: ___ | 1-2 mH |
| Q Factor @ 10 kHz | Measured: ___ | Measured: ___ | $\geq$ 30 |
| DC Resistance | Measured: ___ | Measured: ___ | < 8 ohm |
| Coil Isolation | N/A | N/A | > 1 M ohm |

: MIT coil parameter measurements. Q factor specification references calibration section (@sec-calibration-overview) for frequency-dependent targets. {#tbl-coil-params}

### Test MIT2: DDS Output {#sec-test-mit2}

Configure DDS for 10 kHz test frequency. Measure output with oscilloscope. Verify frequency accuracy is within +/-1%. Check output amplitude stability. Measure THD (target: <1%). Test at 2, 5, 10, 20, and 50 kHz.

### Test MIT3: TX Driver Output {#sec-test-mit3}

Measure DDS output before driver. Measure driver output after amplification. Calculate gain and compare to design specification (+/-10%). Verify no clipping or distortion. Test across frequency range.

### Test MIT4: RX Chain Response {#sec-test-mit4}

Inject known test signal into RX input. Measure signal at each amplification stage. Calculate gain at each stage. Verify total system gain matches design (+/-10%). Measure noise floor (target: <1% of full scale).

### Test MIT5: Coupling Test {#sec-test-mit5}

Set up two probes 1-3 m apart. Place aluminum calibration target between probes. Configure TX on one probe, RX on other. Measure amplitude and phase response. Remove target and establish baseline. Expected response with target: 10-50% amplitude drop, 5-30 degree phase lag.

## ERT Subsystem Tests {#sec-ert-tests}

### Test ERT1: Ring Isolation {#sec-test-ert1}

Measure resistance between adjacent rings (should be >1 M ohm). Measure each ring to ground and to probe rod body (all should be >1 M ohm). Repeat measurements after water exposure to verify sealing integrity.

### Test ERT2: Contact Resistance {#sec-test-ert2}

Insert probe into test medium (sand box with known resistivity). Inject test current (0.5-1 mA). Measure voltage between adjacent rings. Calculate contact resistance (target: <1000 ohm). Verify readings are stable with no drift.

### Test ERT3: Measurement Chain {#sec-test-ert3}

Apply known voltage to ERT input. Select each ring via multiplexer. Verify correct ring selection. Measure at amplifier output. Read ADC value and compare to expected (should be within +/-5%). Test all rings sequentially.

### Test ERT4: Current Source {#sec-test-ert4}

Connect to known test load resistance. Configure current levels: 0.5, 1.0, 1.5, 2.0 mA. Measure actual current at each setting. Verify accuracy is within +/-5%. Test stability over 1 minute at each level.

```{python}
#| label: fig-pass-fail-criteria
#| fig-cap: "Visual representation of pass/fail criteria for key test parameters: (a) Power supply voltage tolerance bands showing the +/-0.1V acceptable range for 3.3V and 5V rails; (b) MIT coil specification ranges for inductance, Q factor, and DC resistance; (c) ERT ring isolation requirements showing minimum 1 M ohm between rings and to ground; (d) DDS frequency accuracy tolerance of +/-1% across all test frequencies."
#| fig-width: 10
#| fig-height: 7

import sys; sys.path.insert(0, '..') if '..' not in sys.path else None
from diagrams.testing import create_pass_fail_criteria

buf = create_pass_fail_criteria()
img = Image.open(buf)
plt.figure(figsize=(10, 7))
plt.imshow(img)
plt.axis('off')
plt.tight_layout()
plt.show()
```

## System Integration Tests {#sec-integration-tests}

### Test INT1: Full System Test {#sec-test-int1}

Power on complete probe system. Verify communication with base hub. Test MIT measurement acquisition. Test ERT measurement acquisition. Verify data collection and storage. Test probe synchronization with other units.

### Test INT2: Reciprocity Test {#sec-test-int2}

Set up two probes (A and B) at fixed separation. Measure A transmitting to B. Measure B transmitting to A. Compare results - should match within 5%. Repeat for multiple probe pairs to verify consistency.

### Test INT3: Repeatability Test {#sec-test-int3}

Set up fixed test configuration. Take measurement. Wait 1 minute. Take same measurement. Repeat 5-10 times. Calculate mean and standard deviation. Pass criteria: standard deviation <5% of mean. No systematic drift over time.

```{python}
#| label: fig-test-results-template
#| fig-cap: "Test results recording template: (a) Summary bar chart showing pass/fail counts by test category with pass rate percentages; (b) Repeatability test trend chart showing individual measurements, mean value, standard deviation bands, and 5% tolerance envelope. This format enables rapid identification of problematic areas and provides documented evidence for QC sign-off."
#| fig-width: 11
#| fig-height: 5.5

import sys; sys.path.insert(0, '..') if '..' not in sys.path else None
from diagrams.testing import create_test_results_template

buf = create_test_results_template()
img = Image.open(buf)
plt.figure(figsize=(11, 5.5))
plt.imshow(img)
plt.axis('off')
plt.tight_layout()
plt.show()
```

## Quantitative Validation Protocols {#sec-validation-protocols}

Beyond functional testing, rigorous quantitative validation is required to ensure the HIRT system meets scientific publication standards.

### ERT Accuracy Validation (NIST-Traceable) {#sec-ert-validation}

Connect precision metal-film resistors (0.1% tolerance) to probe electrode inputs. Test values: 100 ohm, 1 k ohm, 10 k ohm. Inject currents at 0.5, 1.0, 2.0 mA. Record 50 samples for each combination. Calculate Mean Absolute Percentage Error (MAPE).

$$
\text{MAPE} = \frac{1}{n} \sum \frac{|R_{\text{measured}} - R_{\text{true}}|}{R_{\text{true}}} \times 100\%
$$

**Target:** MAPE < 1.0% across the dynamic range.

### MIT Sensitivity Validation (Standard Loop) {#sec-mit-validation}

Construct Standard Calibration Loop: single turn of 14 AWG copper wire, 10 cm diameter, shorted. Place loop coaxially with TX/RX pair at distances of 0.5 m, 1.0 m, 1.5 m. Measure change in mutual impedance at 10 kHz. Compare to analytical dipole-loop solution.

**Target:** Measurement within +/-10% of theoretical prediction.

### Receiver Noise Characterization {#sec-noise-characterization}

Short RX inputs at Zone Hub. Record 10-second timeseries at 30 kSPS. Compute Power Spectral Density (PSD). Report input-referred noise in nV/sqrt(Hz) at 2, 10, 50 kHz.

**Target:** < 20 nV/sqrt(Hz) (comparable to commercial geophysical amplifiers).

## QC Checklist Summary {#sec-qc-checklist}

::: {.callout-warning}
## Quality Control Requirements

- ALL mechanical checks must pass before electrical testing
- ALL electrical checks must pass before subsystem testing
- ALL subsystem checks must pass before integration testing
- FAIL on any critical test requires repair and COMPLETE re-test of that category
- CONDITIONAL status requires documented workarounds and supervisor approval
:::

| Category | Tests | Critical Items | Typical Time |
|----------|-------|----------------|--------------|
| Mechanical | M1-M4 | Rod integrity, sealing | 30 min |
| Electrical | E1-E3 | Power rails, communication | 30 min |
| MIT Subsystem | MIT1-MIT5 | Coil params, coupling | 60 min |
| ERT Subsystem | ERT1-ERT4 | Ring isolation, accuracy | 45 min |
| Integration | INT1-INT3 | Full system, reciprocity | 45 min |
| Environmental | ENV1-ENV2 | Waterproofing | 60 min |

: QC test category summary {#tbl-qc-summary}

**Overall Status Determination:**

- **PASS:** All tests passed - probe approved for field deployment
- **CONDITIONAL:** Minor issues with documented workarounds - requires supervisor approval
- **FAIL:** Critical issues found - requires repair, component replacement, and re-test

## Sign-Off and Documentation {#sec-sign-off}

Upon completion of all testing, the QC inspector must complete the sign-off form including probe ID, test date, inspector name, overall status, and any issues found with required actions. The completed test log, calibration sheet, and sign-off form must be filed with the probe registry before field deployment.

::: {.callout-note}
## Documentation Requirements

- Completed test log with all measurements recorded
- Calibration sheet with coil parameters and baseline values
- Sign-off form with inspector signature and date
- Probe registry entry updated with test status and deployment approval
:::

::: {.callout-tip}
For calibration procedures, see @sec-calibration-overview. For troubleshooting guidance when tests fail, see @sec-troubleshooting-overview.
:::
