[gd_scene load_steps=22 format=3 uid="uid://main_scene"]

[ext_resource type="Script" path="res://scripts/main.gd" id="0"]
[ext_resource type="Script" path="res://scripts/terrain_generator.gd" id="1"]
[ext_resource type="Script" path="res://scripts/operator_controller.gd" id="2"]
[ext_resource type="Script" path="res://scripts/hud.gd" id="3"]
[ext_resource type="Script" path="res://scripts/main_menu.gd" id="4"]
[ext_resource type="Script" path="res://scripts/scenario_select.gd" id="5"]
[ext_resource type="Script" path="res://scripts/survey_plan.gd" id="6"]
[ext_resource type="Script" path="res://scripts/pause_menu.gd" id="7"]
[ext_resource type="Script" path="res://scripts/post_survey.gd" id="8"]
[ext_resource type="Script" path="res://scripts/heatmap_overlay.gd" id="9"]
[ext_resource type="Script" path="res://scripts/breadcrumb_trail.gd" id="10"]
[ext_resource type="Script" path="res://scripts/drone_controller.gd" id="11"]
[ext_resource type="Script" path="res://scripts/borehole_hud.gd" id="12"]
[ext_resource type="Script" path="res://scripts/training_manager.gd" id="13"]
[ext_resource type="Script" path="res://scripts/training_hud.gd" id="14"]
[ext_resource type="Script" path="res://scripts/vegetation_placer.gd" id="15"]
[ext_resource type="Script" path="res://scripts/grass_system.gd" id="16"]

[sub_resource type="ProceduralSkyMaterial" id="sky_material"]
sky_top_color = Color(0.32, 0.50, 0.75, 1)
sky_horizon_color = Color(0.62, 0.72, 0.82, 1)
ground_bottom_color = Color(0.25, 0.22, 0.18, 1)
ground_horizon_color = Color(0.48, 0.48, 0.44, 1)
sun_angle_max = 40.0
sun_curve = 0.1

[sub_resource type="Sky" id="sky"]
sky_material = SubResource("sky_material")

[sub_resource type="Environment" id="environment"]
background_mode = 2
sky = SubResource("sky")
ambient_light_source = 3
ambient_light_color = Color(0.65, 0.72, 0.82, 1)
ambient_light_energy = 0.5
fog_enabled = true
fog_light_color = Color(0.7, 0.75, 0.8, 1)
fog_density = 0.005
fog_aerial_perspective = 0.3
fog_height = 2.0
fog_height_density = 0.15
volumetric_fog_enabled = true
volumetric_fog_density = 0.01
volumetric_fog_albedo = Color(0.85, 0.88, 0.9, 1)
volumetric_fog_emission = Color(0.5, 0.5, 0.5, 1)
volumetric_fog_length = 80.0
ssao_enabled = true
ssao_radius = 2.0
ssao_intensity = 0.6
tonemap_mode = 3
glow_enabled = true
glow_intensity = 0.35
glow_bloom = 0.12
dof_blur_far_enabled = true
dof_blur_far_distance = 40.0
dof_blur_far_transition = 20.0
dof_blur_amount = 0.02

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_operator"]
radius = 0.3
height = 1.7

[sub_resource type="BoxShape3D" id="BoxShape3D_drone"]
size = Vector3(0.4, 0.15, 0.4)

[node name="Main" type="Node3D"]
script = ExtResource("0")

[node name="DirectionalLight" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.866, -0.354, 0.354, 0, 0.707, 0.707, -0.5, -0.612, 0.612, 0, 10, 0)
shadow_enabled = true
shadow_bias = 0.03
light_energy = 1.3
light_color = Color(1.0, 0.94, 0.82, 1)
light_angular_size = 0.5
sky_mode = 1

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("environment")

[node name="Terrain" type="MeshInstance3D" parent="."]
script = ExtResource("1")

[node name="HeatmapOverlay" type="MeshInstance3D" parent="."]
script = ExtResource("9")

[node name="Breadcrumbs" type="MultiMeshInstance3D" parent="."]
script = ExtResource("10")

[node name="Vegetation" type="Node3D" parent="."]
script = ExtResource("15")

[node name="Grass" type="MultiMeshInstance3D" parent="."]
script = ExtResource("16")

[node name="Operator" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10, 2, 10)
script = ExtResource("2")

[node name="Camera3D" type="Camera3D" parent="Operator"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Operator"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.85, 0)
shape = SubResource("CapsuleShape3D_operator")

[node name="DroneOperator" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10, 5, 10)
script = ExtResource("11")

[node name="Camera3D" type="Camera3D" parent="DroneOperator"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="DroneOperator"]
shape = SubResource("BoxShape3D_drone")

[node name="TrainingManager" type="Node" parent="."]
script = ExtResource("13")

[node name="UI" type="CanvasLayer" parent="."]
layer = 10

[node name="HUD" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
script = ExtResource("3")

[node name="BoreholeHUD" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
script = ExtResource("12")

[node name="TrainingHUD" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
script = ExtResource("14")

[node name="MainMenuUI" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
script = ExtResource("4")

[node name="ScenarioSelectUI" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
script = ExtResource("5")

[node name="SurveyPlanUI" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
script = ExtResource("6")

[node name="PauseMenu" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
script = ExtResource("7")

[node name="PostSurveyUI" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
script = ExtResource("8")
