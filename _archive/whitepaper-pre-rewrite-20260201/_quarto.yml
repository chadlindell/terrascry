# HIRT Whitepaper - Quarto Project Configuration
# Generates both print-quality PDF and web-ready HTML from single source
# Build: quarto render

project:
  type: book
  output-dir: _output

book:
  title: "HIRT: Hybrid Inductive-Resistivity Tomography"
  subtitle: "Complete Technical Whitepaper"
  author: "HIRT Development Team"
  date: today

  # Navigation
  sidebar:
    style: docked
    search: true
    collapse-level: 2

  # Page navigation
  page-navigation: true

  # Chapters organized by part
  chapters:
    - index.qmd
    - sections/00-index.qmd
    - part: "Foundations"
      chapters:
        - sections/01-executive-summary.qmd
        - sections/02-physics-theory.qmd
        - sections/03-system-architecture.qmd
    - part: "Building"
      chapters:
        - sections/04-bill-of-materials.qmd
        - sections/05-mechanical-design.qmd
        - sections/06-electronics-circuits.qmd
        - sections/07-assembly-wiring.qmd
        - sections/08-testing-verification.qmd
        - sections/09-calibration.qmd
    - part: "Field Operations"
      chapters:
        - sections/19-ethics-legal-safety.qmd
        - sections/10-field-operations.qmd
        - sections/11-data-recording.qmd
        - sections/12-data-interpretation.qmd
        - sections/13-troubleshooting.qmd
    - part: "Analysis & Applications"
      chapters:
        - sections/17-application-scenarios.qmd
        - sections/18-future-development.qmd
    - part: "Appendices"
      chapters:
        - sections/14-glossary.qmd
        - sections/15-quick-reference.qmd
        - sections/16-field-checklists.qmd

# PDF Output Configuration - Professional Technical Whitepaper Style
format:
  pdf:
    documentclass: scrartcl
    classoption: [10pt, headings=normal]
    top-level-division: section
    papersize: letter
    margin-left: 0.6in
    margin-right: 0.6in
    margin-top: 0.7in
    margin-bottom: 0.7in
    mainfont: "Palatino"
    sansfont: "Helvetica"
    monofont: "Courier"
    fontsize: 10pt
    linestretch: 1.0
    toc: true
    toc-depth: 2
    toc-title: "Contents"
    number-sections: true
    number-depth: 3
    colorlinks: true
    linkcolor: "black"
    urlcolor: "blue"
    citecolor: "black"
    link-citations: true
    pdf-engine: pdflatex
    include-in-header:
      text: |
        % Professional header/footer
        \usepackage{fancyhdr}
        \pagestyle{fancy}
        \fancyhf{}
        \fancyhead[LE,RO]{\thepage}
        \fancyhead[RE]{\small\itshape HIRT Technical Whitepaper}
        \fancyhead[LO]{\small\itshape\leftmark}
        \renewcommand{\headrulewidth}{0.4pt}
        \renewcommand{\footrulewidth}{0pt}

        % Compact figure spacing
        \setlength{\intextsep}{4pt plus 2pt minus 2pt}
        \setlength{\floatsep}{4pt plus 2pt minus 2pt}
        \setlength{\textfloatsep}{6pt plus 2pt minus 2pt}
        \setlength{\abovecaptionskip}{4pt}
        \setlength{\belowcaptionskip}{2pt}

        % Float placement
        \renewcommand{\floatpagefraction}{0.8}
        \renewcommand{\topfraction}{0.85}
        \renewcommand{\bottomfraction}{0.85}
        \renewcommand{\textfraction}{0.15}

        % Equation spacing
        \setlength{\abovedisplayskip}{6pt plus 2pt minus 2pt}
        \setlength{\belowdisplayskip}{6pt plus 2pt minus 2pt}
        \setlength{\abovedisplayshortskip}{3pt plus 1pt minus 1pt}
        \setlength{\belowdisplayshortskip}{3pt plus 1pt minus 1pt}

        % Paragraph spacing - no indent, small skip
        \setlength{\parindent}{0pt}
        \setlength{\parskip}{4pt plus 1pt minus 1pt}

        % Compact lists
        \usepackage{enumitem}
        \setlist{nosep, topsep=2pt, partopsep=0pt, parsep=1pt, itemsep=1pt, leftmargin=1.5em}

        % Table spacing
        \renewcommand{\arraystretch}{1.1}

        % Prevent orphans/widows
        \widowpenalty=10000
        \clubpenalty=10000
        \raggedbottom

        % KOMA-Script section heading formatting
        \RedeclareSectionCommand[
          beforeskip=12pt,
          afterskip=6pt,
          font=\Large\bfseries
        ]{section}
        \RedeclareSectionCommand[
          beforeskip=10pt,
          afterskip=4pt,
          font=\large\bfseries
        ]{subsection}
        \RedeclareSectionCommand[
          beforeskip=8pt,
          afterskip=3pt,
          font=\normalsize\bfseries
        ]{subsubsection}

        % Compact TOC for article class
        \usepackage{tocloft}
        \setlength{\cftbeforesecskip}{2pt}
        \setlength{\cftbeforesubsecskip}{1pt}
        \renewcommand{\cftsecfont}{\normalsize\bfseries}
        \renewcommand{\cftsubsecfont}{\small}
        \renewcommand{\cftsubsubsecfont}{\small}

        % Caption styling - smaller, italic
        \usepackage[font=small,labelfont=bf,textfont=it]{caption}

        % Reduce space around callouts/boxes
        \setlength{\topsep}{2pt}
        \setlength{\partopsep}{0pt}

  # HTML Output Configuration
  html:
    theme:
      light: cosmo
      dark: darkly
    css: assets/styles/custom.css
    toc: true
    toc-depth: 3
    toc-expand: 2
    number-sections: true
    code-fold: true
    code-tools: true
    code-copy: true
    code-overflow: wrap
    # Links
    link-external-icon: true
    link-external-newwindow: true
    # Appearance
    fig-responsive: true
    smooth-scroll: true
    anchor-sections: true
    # Footer
    page-footer:
      left: "HIRT Whitepaper v2.0"
      center: ""
      right: "Built with Quarto"

# Code Execution Settings
execute:
  echo: false
  warning: false
  message: false
  cache: true
  freeze: auto

# Python Environment
jupyter: python3

# Figure Defaults
fig-width: 8
fig-height: 5
fig-dpi: 200
fig-format: png
fig-align: center

# Cross-Reference Settings
crossref:
  fig-prefix: "Figure"
  tbl-prefix: "Table"
  eq-prefix: "Equation"
  sec-prefix: "Section"
  chapters: true

# Language
lang: en

# Bibliography (if needed later)
# bibliography: references.bib
# csl: ieee.csl
